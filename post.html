<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Post - Karantez-Krono</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .theme-yellow { --bg: #000; --card-bg: #1f2937; --text: #fbbf24; --accent: #fde047; --border: #fbbf24; }
    .theme-blue { --bg: #fff; --card-bg: #eff6ff; --text: #1e3a8a; --accent: #1d4ed8; --border: #93c5fd; }
    .theme-green { --bg: #fff; --card-bg: #f0fdf4; --text: #14532d; --accent: #16a34a; --border: #86efac; }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: system-ui;
    }
  </style>
</head>
<body>
  <header class="p-4 shadow" style="background-color: var(--card-bg);">
    <div class="max-w-4xl mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold" style="color: var(--accent);">üìù D√©tail du post</h1>
      <a href="tous-les-posts.html" class="text-sm font-semibold px-3 py-2 rounded-full" style="background-color: var(--accent); color: #000;">‚Üê Tous les posts</a>
    </div>
  </header>

  <main class="max-w-4xl mx-auto p-4" id="postContainer"></main>

  <script>
    const currentTheme = localStorage.getItem('karantez-theme') || 'yellow';
    document.body.className = `theme-${currentTheme}`;

    const categories = {
      books: 'üìö', films: 'üé¨', music: 'üéµ', concerts: 'üé§',
      exhibitions: 'üñºÔ∏è', recipes: 'üç≥', series: 'üì∫', architecture: 'üèõÔ∏è'
    };

    const container = document.getElementById('postContainer');
    const urlParams = new URLSearchParams(window.location.search);
    const postId = urlParams.get('id');
    const posts = JSON.parse(localStorage.getItem('karantez-posts') || '[]');
    const post = posts.find(p => p.id == postId);

    if (!post) {
      container.innerHTML = '<p class="text-center">Post introuvable.</p>';
    } else {
      container.innerHTML = `
        <article class="p-6 rounded shadow" style="background-color: var(--card-bg); border: 1px solid var(--border);">
          <h2 class="text-2xl font-bold mb-2">${categories[post.category] || 'üìù'} ${post.title}</h2>
          <p class="text-sm opacity-70 mb-1">${post.author ? `par ${post.author} ¬∑ ` : ''}${post.date}</p>
          <div class="my-4">
            ${post.imageUrl ? `<img src="${post.imageUrl}" alt="${post.title}" class="rounded w-full mb-4">` : ''}
            ${post.shortDescription ? `<p class="text-lg text-yellow-400 font-semibold mb-2">${post.shortDescription}</p>` : ''}
            ${post.longDescription ? `<p class="leading-relaxed mb-4">${post.longDescription}</p>` : ''}
            ${post.link ? `<a href="${post.link}" target="_blank" class="inline-block mt-2 underline text-blue-400">üîó Voir le lien externe</a>` : ''}
          </div>
          <div class="mt-4">
            <span class="inline-block px-3 py-1 rounded-full text-sm" style="background-color: ${post.isPublic ? '#dcfce7' : '#f3f4f6'}; color: ${post.isPublic ? '#166534' : '#374151'};">
              ${post.isPublic ? 'Public' : 'Priv√©'}
            </span>
            <span class="ml-4">‚ù§Ô∏è ${post.hearts}</span>
          </div>
        </article>
      `;
    }
  </script>
</body>
</html>